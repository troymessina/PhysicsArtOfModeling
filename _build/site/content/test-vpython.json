{"kind":"Article","sha256":"f4e1a7ceb4b06d67ea322e0205cd2029ec06fddcc2b53e2164866d858357155e","slug":"test-vpython","location":"/test_VPython.md","dependencies":[],"frontmatter":{"authors":[{"id":"Troy Messina","name":"Troy Messina"}],"keywords":["Introductory Physics"],"exports":[{"format":"md","filename":"test_VPython.md","url":"/test_VPython-cc6c0c37e4e75dc2d4bad179ddbbb7f4.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"div","identifier":"glowscript","label":"glowscript","class":"glowscript","children":[],"html_id":"glowscript","key":"ZTMSHrj06v"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"// START JAVASCRIPT\n;(function() {;\nvar ρσ_modules = {};\nvar hitlist, Stars;\nρσ_modules.pythonize = {};","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"nYyc2N2KJD"}],"key":"Yul4QIgR9V"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"(function(){\nfunction strings() {\nvar string_funcs, exclude, name;\nstring_funcs = set(“capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill”.split(\" \"));\nif (!arguments.length) {\nexclude = (function(){\nvar s = ρσ_set();\ns.jsset.add(“split”);\ns.jsset.add(“replace”);\nreturn s;\n})();\n} else if (arguments[0]) {\nexclude = ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ixkrxP3PiP"},{"type":"link","url":"http://Array.prototype.slice.call","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Array​.prototype​.slice​.call","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"svdveVWk8t"}],"urlSource":"http://Array.prototype.slice.call","key":"uhbdbPuA8N"},{"type":"text","value":"(arguments);\n} else {\nexclude = null;\n}\nif (exclude) {\nstring_funcs = string_funcs.difference(set(exclude));\n}\nvar ρσ_Iter0 = string_funcs;\nρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === “function”) ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));\nfor (var ρσ_Index0 of ρσ_Iter0) {\nname = ρσ_Index0;\n(ρσ_expr_temp = String.prototype)[(typeof name === “number” && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === “number” && name < 0) ? ρσ_expr_temp.length + name : name];\n}\n};\nif (!strings.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"vZXTngdVVm"},{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"module","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"lnxiNUPG1m"}],"key":"BV6Hu36qow"},{"type":"text","value":") Object.defineProperties(strings, {\n","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OlfjZoFoXH"},{"type":"strong","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"module","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Tnbi5C4h3M"}],"key":"izSJtGry5r"},{"type":"text","value":" : {value: “pythonize”}\n});","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ZlYapqExgd"}],"key":"UOWa01UkqB"},{"type":"code","lang":"","value":"ρσ_modules.pythonize.strings = strings;","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"MPCfcokgQ2"},{"type":"paragraph","position":{"start":{"line":48,"column":1},"end":{"line":52,"column":1}},"children":[{"type":"text","value":"})();\nasync function ","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"HaBV3Ea7pK"},{"type":"strong","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"text","value":"main","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"qrllRPXfoO"}],"key":"ITsA7rGviu"},{"type":"text","value":"() {\n“use strict”;\nvar display = canvas;\nvar scene = canvas();","position":{"start":{"line":48,"column":1},"end":{"line":48,"column":1}},"key":"cgjLE4ZcDw"}],"key":"fte3I0jaG2"},{"type":"code","lang":"","value":"var version, print, arange, __name__, type, ρσ_ls, Nstars, G, Msun, Rsun, L, vsun, xaxis, yaxis, zaxis, Stars, star_colors, psum, star, R, i, dt, hitlist, hit, s1, s2, mass, momentum, pos;\nversion = ρσ_list_decorate([ \"3.2\", \"glowscript\" ]);\nArray.prototype['+'] = function(r) {return this.concat(r)}\nArray.prototype['*'] = function(r) {return __array_times_number(this, r)}\nwindow.__GSlang = \"vpython\";\nprint = GSprint;\narange = range;\n__name__ = \"__main__\";\ntype = pytype;\nvar strings = ρσ_modules.pythonize.strings;\n\nstrings();\n\"7\";\nscene.width = scene.height = 600;\n\"10\";\nscene.title = \"Stars interacting gravitationally\";\n\"18\";\nscene.caption = \"To rotate \\\"camera\\\", drag with right button or Ctrl-drag.\\nTo zoom, drag with middle button or Alt/Option depressed, or use scroll wheel.\\n  On a two-button mouse, middle is left + right.\\nTo pan left/right and up/down, Shift-drag.\\nTouch screen: pinch/extend to zoom, swipe or two-finger rotate.\\n\\nReplot the web page to restart with different (random) initial conditions.\";\n\"20\";\nNstars = 20;\n\"22\";\nG = 6.7e-11;\n\"25\";\nMsun = 2e30;\n\"26\";\nRsun = 2e9;\n\"27\";\nL = 4e10;\n\"28\";\nvsun = .8[\"*\"](sqrt(G[\"*\"](Msun)[\"/\"](Rsun)));\n\"30\";\nscene.range = 2[\"*\"](L);\n\"31\";\nscene.forward = vec(1[\"-u\"]()[\"*\"](1), 1[\"-u\"]()[\"*\"](1), 1[\"-u\"]()[\"*\"](1));\n\"33\";\nxaxis = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({color: color.gray(.5), radius: 3e8})]);\n\"34\";\nxaxis.append(vec(0, 0, 0));\n\"35\";\nxaxis.append(vec(L, 0, 0));\n\"36\";\nyaxis = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({color: color.gray(.5), radius: 3e8})]);\n\"37\";\nyaxis.append(vec(0, 0, 0));\n\"38\";\nyaxis.append(vec(0, L, 0));\n\"39\";\nzaxis = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({color: color.gray(.5), radius: 3e8})]);\n\"40\";\nzaxis.append(vec(0, 0, 0));\n\"41\";\nzaxis.append(vec(0, 0, L));\n\"43\";\nStars = ρσ_list_decorate([]);\n\"44\";\nstar_colors = ρσ_list_decorate([ color.red, color.green, color.blue, color.yellow, color.cyan, color.magenta ]);\n\"47\";\npsum = vec(0, 0, 0);\n\"48\";\nfor (var ρσ_Index1 = 0; ρσ_Index1[\"<\"](Nstars); ρσ_Index1++) {\n    i = ρσ_Index1;\n    \"49\";\n    star = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: L[\"*\"](vec.random()), make_trail: true, retain: 150, trail_radius: 2e8})]);\n    \"50\";\n    R = Rsun[\"/\"](2)[\"+\"](Rsun[\"*\"](random()));\n    \"51\";\n    star.radius = R;\n    \"52\";\n    star.mass = Msun[\"*\"](Math.pow((R[\"/\"](Rsun)), 3));\n    \"53\";\n    star.momentum = vec.random()[\"*\"](vsun)[\"*\"](star.mass);\n    \"54\";\n    star.color = star.trail_color = ρσ_getitem(star_colors, i[\"%\"](6));\n    \"55\";\n    Stars.append(star);\n    \"56\";\n    psum = psum[\"+\"](star.momentum);\n}\n\"59\";\nfor (var ρσ_Index2 = 0; ρσ_Index2[\"<\"](Nstars); ρσ_Index2++) {\n    i = ρσ_Index2;\n    \"60\";\n    ρσ_getitem(Stars, i).momentum = ρσ_getitem(Stars, i).momentum[\"-\"](1[\"*\"](psum)[\"/\"](Nstars));\n}\n\"62\";\ndt = 1e3;\n\"63\";\nhitlist = ρσ_list_decorate([]);\n\"65\";\nasync function computeForces() {\n    var ρσ_ls, N, si, F, pos1, m1, radius, sj, r, rmag2, j, i;\n    \"66\";\n    \"67\";\n    hitlist = ρσ_list_decorate([]);\n    \"68\";\n    N = len(Stars);\n    \"69\";\n    for (var ρσ_Index3 = 0; ρσ_Index3[\"<\"](N); ρσ_Index3++) {\n        i = ρσ_Index3;\n        \"70\";\n        si = ρσ_getitem(Stars, i);\n        \"71\";\n        if (si === null) {\n            continue;\n        }\n        \"72\";\n        F = vec(0, 0, 0);\n        \"73\";\n        pos1 = si.pos;\n        \"74\";\n        m1 = si.mass;\n        \"75\";\n        radius = si.radius;\n        \"76\";\n        for (var ρσ_Index4 = 0; ρσ_Index4[\"<\"](N); ρσ_Index4++) {\n            j = ρσ_Index4;\n            \"77\";\n            if ((i === j || typeof i === \"object\" && ρσ_equals(i, j))) {\n                continue;\n            }\n            \"78\";\n            sj = ρσ_getitem(Stars, j);\n            \"79\";\n            if (sj === null) {\n                continue;\n            }\n            \"80\";\n            r = sj.pos[\"-\"](1[\"*\"](pos1));\n            \"81\";\n            rmag2 = mag2(r);\n            \"82\";\n            if (rmag2[\"<=\"](Math.pow((radius[\"+\"](sj.radius)), 2))) {\n                hitlist.append(ρσ_list_decorate([ i, j ]));\n            }\n            \"83\";\n            F = F[\"+\"](G[\"*\"](m1)[\"*\"](sj.mass)[\"/\"](Math.pow(rmag2, 1.5))[\"*\"](r));\n        }\n        \"84\";\n        si.momentum = si.momentum[\"+\"](F[\"*\"](dt));\n    }\n};\nif (!computeForces.__module__) Object.defineProperties(computeForces, {\n    __module__ : {value: null}\n});\n\n\"86\";\nwhile (true) {\n    \"87\";\n    (await rate(100));\n    \"90\";\n    (await computeForces());\n    \"93\";\n    var ρσ_Iter5 = Stars;\n    ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === \"function\") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));\n    for (var ρσ_Index5 of ρσ_Iter5) {\n        star = ρσ_Index5;\n        \"94\";\n        if (star === null) {\n            continue;\n        }\n        \"95\";\n        star.pos = star.pos[\"+\"](star.momentum[\"*\"](dt[\"/\"](star.mass)));\n    }\n    \"98\";\n    hit = len(hitlist)[\"-\"](1[\"*\"](1));\n    \"99\";\n    while (hit[\">\"](0)) {\n        \"100\";\n        s1 = ρσ_getitem(Stars, ρσ_getitem(ρσ_getitem(hitlist, hit), 0));\n        \"101\";\n        s2 = ρσ_getitem(Stars, ρσ_getitem(ρσ_getitem(hitlist, hit), 1));\n        \"102\";\n        if (s1 === null || s2 === null) {\n            continue;\n        }\n        \"104\";\n        mass = s1.mass[\"+\"](s2.mass);\n        \"105\";\n        momentum = s1.momentum[\"+\"](s2.momentum);\n        \"106\";\n        pos = s1.mass[\"*\"](s1.pos)[\"+\"](s2.mass[\"*\"](s2.pos))[\"/\"](mass);\n        \"107\";\n        s1.color = s1.trail_color = s1.mass[\"*\"](s1.color)[\"+\"](s2.mass[\"*\"](s2.color))[\"/\"](mass);\n        \"108\";\n        R = Rsun[\"*\"](Math.pow((mass[\"/\"](Msun)), (1[\"/\"](3))));\n        \"110\";\n        s1.clear_trail();\n        \"111\";\n        s2.clear_trail();\n        \"112\";\n        s2.visible = false;\n        \"114\";\n        s1.mass = mass;\n        \"115\";\n        s1.momentum = momentum;\n        \"116\";\n        s1.pos = pos;\n        \"117\";\n        s1.radius = R;\n        \"118\";\n        ρσ_setitem(Stars, ρσ_getitem(ρσ_getitem(hitlist, hit), 1), null);\n        \"119\";\n        hit=hit[\"-\"](1);\n    }\n}","position":{"start":{"line":54,"column":1},"end":{"line":258,"column":1}},"key":"zbeXOQ7Xc0"},{"type":"paragraph","position":{"start":{"line":259,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"text","value":"};\nif (!","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"DaqrUHy6fn"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"main","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"EMOSKuaDyp"}],"key":"L6kv8snvKq"},{"type":"text","value":".","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"oId50oyk9s"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"module","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"JfO88NDalh"}],"key":"pRgv8Vmk92"},{"type":"text","value":") Object.defineProperties(","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"AipEwa1jqi"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"main","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"DaAIYadWnz"}],"key":"k4zjhjVknF"},{"type":"text","value":", {\n","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"YFcDWjDrJq"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"module","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"b2n2skfeTi"}],"key":"LX12M5ZvDQ"},{"type":"text","value":" : {value: null}\n});","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"OmmjzwXlQS"}],"key":"OMaJW4OKPn"},{"type":"paragraph","position":{"start":{"line":264,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":";","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"oVOUZm0qgc"},{"type":"inlineMath","value":"(function(){ window.__context = { glowscript_container: ","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"error":true,"message":"Expected group after '_' at position 21: …tion(){ window._̲_context = { gl…","key":"Kak9qIC3vD"},{"type":"text","value":"(“#glowscript”).removeAttr(“id”) }; ","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"uo40p53PfW"},{"type":"strong","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"children":[{"type":"text","value":"main","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"HJHze1m50l"}],"key":"TtLd1DY1DV"},{"type":"text","value":"() })})()\n// END JAVASCRIPT","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"FWc5DSgtFk"}],"key":"vf6NNEHb2Y"},{"type":"paragraph","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"text","value":"//--><!]]>","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"p7Z35dNNn3"}],"key":"JYvZ6Xw336"}],"key":"CcA2FW6RUB"}],"key":"pUn50S5xm0"},"references":{"cite":{"order":[],"data":{}}}}